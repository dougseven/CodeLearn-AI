{
    "lesson": "# Async/Await Concurrency Patterns in Python\n\n## Introduction\nAsync/await is Python's modern approach to writing concurrent code, similar to C#'s async/await pattern. This pattern allows writing asynchronous code that looks and behaves like synchronous code.\n\n## Concept Overview\nPython's async/await (introduced in Python 3.5+) provides a way to write concurrent code using coroutines. Like C#'s Task-based async pattern, Python uses an event loop to manage async operations.\n\n## Syntax\n```python\nasync def fetch_data(url):\n    async with aiohttp.ClientSession() as session:\n        async with session.get(url) as response:\n            return await response.text()\n\n# Usage\nasync def main():\n    data = await fetch_data('https://api.example.com')\n    print(data)\n```\n\n```python\n# Parallel execution\nasync def process_urls(urls):\n    async with aiohttp.ClientSession() as session:\n        tasks = [fetch_data(url) for url in urls]\n        results = await asyncio.gather(*tasks)\n        return results\n```\n\n## Key Points\n- Python's async/await is similar to C#'s Task-based async pattern\n- asyncio.gather() is equivalent to C#'s Task.WhenAll()\n- Python coroutines use 'async def' instead of C#'s async keyword\n- await can only be used inside async functions\n\n## Common Mistakes\n- Blocking IO in async functions\n- Not using await with async functions\n- Mixing sync and async code incorrectly\n- Not running async code in an event loop\n\n## Practice\nCreate an async function that processes multiple API endpoints concurrently:\n```python\nasync def fetch_multiple(urls):\n    # Hint: Use asyncio.gather()\n    pass\n```",
    "challenge": "# Create an async function that fetches data from multiple URLs concurrently\n# and returns the combined results as a list\n\nasync def fetch_concurrent(urls: list[str]) -> list[str]:\n    \"\"\"Fetch data from multiple URLs concurrently.\n    \n    Requirements:\n    1. Use aiohttp for HTTP requests\n    2. Handle connection errors gracefully\n    3. Process all URLs concurrently using asyncio.gather()\n    4. Return results in the same order as input URLs\n    \n    Args:\n        urls: List of URLs to fetch\n    Returns:\n        List of string responses in the same order as input URLs\n    \"\"\"\n    pass",
    "tests": [
        "async def test_basic_fetch():\n    urls = ['http://example.com', 'http://example.org']\n    results = await fetch_concurrent(urls)\n    assert len(results) == 2\n    assert all(isinstance(r, str) for r in results)",
        "async def test_empty_list():\n    results = await fetch_concurrent([])\n    assert results == []",
        "async def test_error_handling():\n    urls = ['http://invalid.url', 'http://example.com']\n    results = await fetch_concurrent(urls)\n    assert len(results) == 2\n    assert results[0] is None  # Should handle invalid URL gracefully"
    ]
}